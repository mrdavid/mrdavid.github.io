    <!DOCTYPE html charset=UTF-8>
    <html>
    <head>
        <title>Reading</title>
        <!-- Bootstrap -->
        <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="js/jquery-1.8.2.min.js"></script>
        <script src="js/bootstrap.min.js"></script>
    </head>
    <body>
       <div class="container">
        <div class="row">
            <div class="span12">
                <p><a href="index.html">&lt; Back</a></p>
                <p>I started this log on October 30th, 2012. I list all books I read.<br>I try to list scientific articles, comics and other material of note under 'other material', but the list is horribly incomplete. I recorded most blog posts and articles on the net through the pocket app for a while. Here's <a href="http://dl.dropboxusercontent.com/u/1297172/sync/pocket/index.html">a graph of the number of articles I read each day</a> in that period.</p>
                <p>Some entries have links or notes. You can <a id="ShowNotesLinks" href="#">make them visible here</a>.</p>
                <hr />
            </div>
        </div>
        <div class="row">
        <!--
            <div class="span12">
                <a href="#" class="buttonBall" />All</a><br />
                By Topic: 
                <div id="taglinks_here">
                </div>
            </div> -->

            <div class="span7">
                <h1>Books</h1>

                <!-- Books -->
                <div id="books_here"></div>
                <!-- End Books -->
            </div>
            <div class="span5">
               
                <ul class="nav nav-tabs">
                    <li class="active"><a href="#tags" data-toggle="tab" class="active">Tags</a></li>
                    <li><a href="#stat" data-toggle="tab">Statistics</a></li>
                    <li><a href="#othe" data-toggle="tab">Other material</a></li>
                </ul>
                
                <div class="tab-content">
                    <div class="tab-pane active" id="tags">
                        <a href="#" class="buttonBall" />All</a><br />
                        By Topic: 
                        <div id="taglinks_here">
                        </div>
                    </div>
                    <div class="tab-pane" id="stat">
                        <div id="statistics_here"></div>  
                    </div>
                    <div class="tab-pane" id="othe">
                        <div id="material_here"></div>
                    </div>
                </div>
            </div>

            </div> <!-- / row --> 
            <hr />
            <!-- <p>
                <small>If you're interested in buying any of these books through Amazon Germany and don't mind if I get some of that money, you can use the links on this site: <a href="#" class="buttonShowAmazonLinks">Show Amazon.de links</a>. 
                </small>
            </p> -->
        </div> <!-- / container -->

        <script>
        if (window.XMLHttpRequest)
        {// code for IE7+, Firefox, Chrome, Opera, Safari
            xmlhttp=new XMLHttpRequest();
        }
        else
        {// code for IE6, IE5
            xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
        }
        xmlhttp.open("GET","reading.xml",false);
        xmlhttp.send();
        xmlDoc=xmlhttp.responseXML; 

        books = xmlDoc.getElementsByTagName("book");
        others = xmlDoc.getElementsByTagName("other");
        tags = [];

        /*
         <book review="true">
        <author>Paul Teller</author>
        <title>An Interpretive Introduction to Quantum Field Theory</title>
        <bought>2012.02.10</bought>
        <started></started>
        <finnished>2012.09.14</finnished>
        <tag>Quantum Field Theory</tag>
        <amazon></amazon>
        <link></link>
        </book>

        Books:
        Title must be present
        if attribute review is true, write "Review" instead of "Notes" on the notes-button label

        Other material:

    */
    function addMiddot(shouldI){
        if(shouldI){
            return ' &middot; ';
        }
        else{
            return '';
        }
    }

    function tagify(sometag){
        return sometag.split(' ').join('_');
    }

    function displayBook(elementone, klass){
        if(!klass){ klass = "material"; }
        // Generate the HTML block to display a book entry and return it as a string.
        //author = books[i].getElementsByTagName("author")[0].childNodes[0].nodeValue;
        author = elementone.getElementsByTagName("author");
        title = elementone.getElementsByTagName("title");
        txt = '';

        if ( author.length > 0 && title.length > 0){
            bought = elementone.getElementsByTagName("bought");
            finnished = elementone.getElementsByTagName("finnished");
            started = elementone.getElementsByTagName("started");
            amazonLink = elementone.getElementsByTagName("amazon");
            link = elementone.getElementsByTagName("link");
            notes = elementone.getElementsByTagName("notes");
            taggen = elementone.getElementsByTagName("tag");
            tag_list = '';
            for (var i = taggen.length - 1; i >= 0; i--) {
                tags.push(taggen[i].childNodes[0].nodeValue);
                    tag_list += tagify(taggen[i].childNodes[0].nodeValue) + ' ';
            };

            txt += '<p class="'+ klass +' ' + tag_list + '"><b>' + author[0].childNodes[0].nodeValue + ', <i>' + title[0].childNodes[0].nodeValue + '</i></b><br />';
            dotMarker = false;
            if ( bought.length > 0){
                txt += 'Bought: ' + bought[0].childNodes[0].nodeValue;
                dotMarker = true;
            }
            if( started.length > 0){
                txt += addMiddot(dotMarker);
                txt += 'Started: ' + started[0].childNodes[0].nodeValue;
                dotMarker = true;
            }
            if ( finnished.length > 0){
                txt += addMiddot(dotMarker);
                txt += 'Finished: ' + finnished[0].childNodes[0].nodeValue;
                dotMarker = true;
            }
            if(dotMarker){ txt += '<br />'; }

            if ( link.length > 0){
                txt += '<a href="' + link[0].childNodes[0].nodeValue +'" class="btn btn-info btn-mini hide noteslinks">Link</a>';
            }
            if ( notes.length > 0){
                txt += '<a href="' + notes[0].childNodes[0].nodeValue +'" class="btn btn-info btn-mini hide noteslinks">Notes</a>';
            }
            if ( amazonLink.length > 0){
                txt += '<a href="'+ amazonLink[0].childNodes[0].nodeValue +'" class="btn btn-warning btn-mini hide amazonLink">On Amazon.de</a>';
            }
            txt += "</p>";
        };
        //started = 'Started: ' + books[i].getElementsByTagName("started")[0].childNodes[0].nodeValue;
        //finnished = 'Finnished: ' + books[i].getElementsByTagName("finnished")[0].childNodes[0].nodeValue;
        //txt =  '<p class="material' + tag_list + '"><b>' + author + ', <i>' + title + '</i></b><br />Bought: 2012.02.10 &middot; Started: ? &middot; Finnished: 2012.09.14<br /><a href="reading/interpretiv_introduction_qft.html" class="btn btn-info btn-mini">Notes</a><a href="'+ amazon_link +'" class="btn btn-warning btn-mini hide amazonLink">On Amazon.de</a></p>';
        return txt;
    };

    function displayOther(i){
        // Generate the HTML block to display an entry that's not a book and return it as a string.
        // pass
        return displayBook(i, 'other');
    }

    function generateTagLinks(taglist){
        // From a list of all tags generate an alphabetically ordered list of links and return the HTML as a string.
        // pass
    }

    $(document).ready(function(){
        function unbold_all_tags(){
                // pass
            }
            function show_all(){
                $("p.material").slideDown("fast");
            };
            function hide_all(){
                $("p.material").slideUp("fast");
            };
            function show_hide_tags(elementone){
                hide_all();
                $("p." + elementone).slideDown("fast");
            //elementone.slideUp("fast");
        };
        /* ----------------------- */
            // Insert XML data
            taglist = '';
            txtbooks = '';
            txtothers = '';
            for (var i = 0; i < books.length; i++) {
                txtbooks += displayBook(books[i]);
            };
            for (var i = 0; i < others.length; i++) {
                txtothers += displayOther(others[i]);
            };
            document.getElementById("books_here").innerHTML=txtbooks;
            document.getElementById("material_here").innerHTML=txtothers;
            //books = null;
            others = null;

            // Remove Duplicates
            uniqueNames = [];
            var count = {};
            $.each(tags, function(i, el){
            if($.inArray(el, uniqueNames) === -1){ uniqueNames.push(el); count[el] = 1; }
            else{ count[el] = count[el] + 1; }
            });

            tags = uniqueNames;
            tags.sort();
            tag_links = '';
            
            //var current_letter = tags[0][0];
            for (var i = 0; i < tags.length; i++) {
                /*
                if(tags[i][0] != current_letter){
                    current_letter = tags[i][0];
                    tag_links += "<br>";
                }*/
                tag_links += '<a href="#" class="buttonB ' + tagify(tags[i]) + '" />' + tags[i] + ' ('+ count[tags[i]] +')</a>';
                if (i != (tags.length - 1)) { tag_links += " <br> "}
            };
            document.getElementById("taglinks_here").innerHTML=tag_links;

            /* ----------------------- */
            // Event Handlers
            $("a.buttonShowAmazonLinks").click(function() { $("a.amazonLink").fadeIn(); });
            $("#ShowNotesLinks").click(function() { $("a.noteslinks").fadeIn(); });
            $("a.buttonBall").click(function(){ show_all(); });
            $("a.buttonB").click(function(){ show_hide_tags($(this).attr('class').split(/\s+/)[1]); });
            
            // Statistics
            
            var statistics = [];
            var labels = ["Total number of books", "Books per month"];
            
            var total_books = books.length;
            statistics.push(total_books);
            
            var d = new Date();
            var books_per_month = (total_books/( (d.getFullYear() - 2013)*12 + 4 + d.getMonth() + 1  )).toFixed(2);
            statistics.push(books_per_month);
            
            var txt = "";
            
            $.each(statistics, function(idx, itm){
                txt += labels[idx] + ": " + statistics[idx] + "<br>";
            });
            
            document.getElementById("statistics_here").innerHTML=txt;
        });
    </script>

</body>
</html>
